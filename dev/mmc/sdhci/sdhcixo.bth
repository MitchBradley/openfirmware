purpose: Load file for SDHCI (Secure Digital Host Controller Interface)

command: &tokenize &this
build-now

silent on

begin-tokenizing sdhcixo.fc

FCode-version2
fload ${BP}/dev/mmc/sdhci/sdhci.fth

init

: populate-children  ( -- )
   " atest?" evaluate  if
      new-device
         2 encode-int " reg" property
         " sdmmc" " $load-driver" eval drop
      finish-device

      new-device
         1 encode-int " reg" property
         " mv8686" " $load-driver" eval drop
      finish-device
   else
      new-device
         1 encode-int " reg" property
         " sdmmc" " $load-driver" eval drop
         " internal" " slot-name" string-property
      finish-device

      new-device
         2 encode-int " reg" property
         " sdmmc" " $load-driver" eval drop
         " external" " slot-name" string-property
      finish-device

      new-device
         3 encode-int " reg" property
         " mv8686" " $load-driver" eval drop
      finish-device
   then
;

populate-children

end0

end-tokenizing
